$NetBSD: patch-ba,v 1.6 2009/09/07 21:48:14 tonio Exp $

--- otherlibs/unix/socketaddr.c.orig	2005-03-24 18:20:53.000000000 +0100
+++ otherlibs/unix/socketaddr.c	2009-05-31 14:23:50.000000000 +0200
@@ -80,7 +80,7 @@
       adr->s_inet6.sin6_family = AF_INET6;
       adr->s_inet6.sin6_addr = GET_INET6_ADDR(Field(mladr, 0));
       adr->s_inet6.sin6_port = htons(Int_val(Field(mladr, 1)));
-      *adr_len = sizeof(struct sockaddr_in6);
+      adr->s_gen.sa_len = *adr_len = sizeof(struct sockaddr_in6);
       break;
     }
 #endif
@@ -88,7 +88,7 @@
     adr->s_inet.sin_family = AF_INET;
     adr->s_inet.sin_addr = GET_INET_ADDR(Field(mladr, 0));
     adr->s_inet.sin_port = htons(Int_val(Field(mladr, 1)));
-    *adr_len = sizeof(struct sockaddr_in);
+    adr->s_gen.sa_len = *adr_len = sizeof(struct sockaddr_in);
     break;
   }
 }
