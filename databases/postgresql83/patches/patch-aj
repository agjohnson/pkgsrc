$NetBSD: patch-aj,v 1.2 2010/01/21 12:45:28 adam Exp $

--- src/makefiles/pgxs.mk	2010-01-21 12:58:01.000000000 +0100
+++ src/makefiles/pgxs.mk.orig	2010-01-18 10:08:33.000000000 +0100
@@ -121,9 +117,6 @@
 ifdef PROGRAM
 	$(INSTALL_PROGRAM) $(PROGRAM)$(X) '$(DESTDIR)$(bindir)'
 endif # PROGRAM
-ifdef MODULE_big
-	$(INSTALL_SHLIB) $(shlib) '$(DESTDIR)$(pkglibdir)/$(MODULE_big)$(DLSUFFIX)'
-endif # MODULE_big
 ifdef SCRIPTS
 	@for file in $(addprefix $(srcdir)/, $(SCRIPTS)); do \
 	  echo "$(INSTALL_SCRIPT) $$file '$(DESTDIR)$(bindir)'"; \
@@ -137,6 +130,10 @@
 	done
 endif # SCRIPTS_built
 
+ifdef MODULE_big
+install: install-lib
+endif # MODULE_big
+
 
 installdirs:
 ifneq (,$(DATA)$(DATA_built))
@@ -145,7 +142,7 @@
 ifneq (,$(DATA_TSEARCH))
 	$(mkinstalldirs) '$(DESTDIR)$(datadir)/tsearch_data'
 endif
-ifneq (,$(MODULES)$(MODULE_big))
+ifneq (,$(MODULES))
 	$(mkinstalldirs) '$(DESTDIR)$(pkglibdir)'
 endif
 ifdef DOCS
@@ -157,6 +154,10 @@
 	$(mkinstalldirs) '$(DESTDIR)$(bindir)'
 endif
 
+ifdef MODULE_big
+installdirs: installdirs-lib
+endif # MODULE_big
+
 
 uninstall:
 ifneq (,$(DATA)$(DATA_built))
@@ -174,9 +175,6 @@
 ifdef PROGRAM
 	rm -f '$(DESTDIR)$(bindir)/$(PROGRAM)$(X)'
 endif
-ifdef MODULE_big
-	rm -f '$(DESTDIR)$(pkglibdir)/$(MODULE_big)$(DLSUFFIX)'
-endif
 ifdef SCRIPTS
 	rm -f $(addprefix '$(DESTDIR)$(bindir)'/, $(SCRIPTS))
 endif
@@ -184,6 +182,10 @@
 	rm -f $(addprefix '$(DESTDIR)$(bindir)'/, $(SCRIPTS_built))
 endif
 
+ifdef MODULE_big
+uninstall: uninstall-lib
+endif # MODULE_big
+
 
 clean:
 ifdef MODULES
