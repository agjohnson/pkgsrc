$NetBSD: patch-ah,v 1.12 2009/03/25 09:32:49 markd Exp $

On NetBSD subsequent socket() calls return EISCONN

--- modules/printbackends/cups/gtkcupsutils.c~	2009-01-08 05:33:32.000000000 +1300
+++ modules/printbackends/cups/gtkcupsutils.c	2009-03-15 17:59:52.000000000 +1300
@@ -1290,7 +1290,7 @@
 
           error_code = errno;
 
-          if (code == 0)
+          if (code == 0 || error_code == EISCONN)
             {
               close (test->socket);
               test->socket = -1;
