$NetBSD: patch-ab,v 1.1 2009/12/28 19:36:15 gdt Exp $

# https://sourceforge.net/tracker/?func=detail&aid=2921899&group_id=83870&atid=570954
# patch taken from debian at http://git.debian.org/?p=collab-maint/viking.git;a=blob;f=debian/patches/libgps-2.90-fix;h=e23540bf533043ff26c7e0efeea0ea0f1807166f;hb=5af131f5622da98d640ed9b9f699b0b7fa6b3b83

--- src/vikgpslayer.c.orig	2009-09-09 20:16:18.000000000 +0000
+++ src/vikgpslayer.c
@@ -1317,7 +1317,7 @@ static gboolean rt_gpsd_try_connect(gpoi
   vgl->realtime_io_channel = g_io_channel_unix_new(vgl->vgpsd->gpsd.gps_fd);
   vgl->realtime_io_watch_id = g_io_add_watch( vgl->realtime_io_channel,
                     G_IO_IN | G_IO_ERR | G_IO_HUP, gpsd_data_available, vgl);
-  gps_query(&vgl->vgpsd->gpsd, "w+x");
+  gps_stream(&vgl->vgpsd->gpsd, WATCH_ENABLE, NULL);
   return FALSE;  /* no longer called by timeout */
 }
 
