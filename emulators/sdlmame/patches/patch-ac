$NetBSD: patch-ac,v 1.2 2009/11/13 14:45:25 wiz Exp $

--- src/emu/mamecore.h.orig	2009-11-01 00:44:54.000000000 +0000
+++ src/emu/mamecore.h
@@ -9,7 +9,7 @@
 
 ***************************************************************************/
 
-#pragma once
+
 
 #ifndef __MAMECORE_H__
 #define __MAMECORE_H__
@@ -333,6 +333,10 @@ DECL_NORETURN void CLIB_DECL fatalerror_
     INLINE FUNCTIONS
 ***************************************************************************/
 
+#if defined(__NetBSD__)
+#include <sys/param.h>
+#endif
+#if !defined(__NetBSD__) || (__NetBSD_Version__ < 599001500)
 /* population count */
 INLINE int popcount(UINT32 val)
 {
@@ -342,6 +346,7 @@ INLINE int popcount(UINT32 val)
 		val &= val - 1;
 	return count;
 }
+#endif
 
 
 /* convert a series of 32 bits into a float */
