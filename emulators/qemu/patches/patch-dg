$NetBSD: patch-dg,v 1.3 2009/10/11 16:04:13 asau Exp $

--- osdep.c.orig	2009-09-23 23:01:32.000000000 +0400
+++ osdep.c	2009-09-30 14:05:39.000000000 +0400
@@ -110,7 +110,7 @@
     void *ptr;
 
 /* no need (?) for a dummy file on OpenBSD/FreeBSD */
-#if defined(__OpenBSD__) || defined(__FreeBSD__) || defined(__DragonFly__)
+#if defined(__OpenBSD__) || defined(__FreeBSD__) || defined(__DragonFly__) || defined(__NetBSD__)
     int map_anon = MAP_ANON;
 #else
     int map_anon = 0;
@@ -181,7 +181,7 @@
     }
     size = (size + 4095) & ~4095;
     ftruncate(phys_ram_fd, phys_ram_size + size);
-#endif /* !(__OpenBSD__ || __FreeBSD__ || __DragonFly__) */
+#endif /* !(__OpenBSD__ || __FreeBSD__ || __DragonFly__ || __NetBSD__) */
     ptr = mmap(NULL,
                size,
                PROT_WRITE | PROT_READ, map_anon | MAP_SHARED,
