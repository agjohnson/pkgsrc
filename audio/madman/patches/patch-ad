$NetBSD: patch-ad,v 1.4 2010/01/04 17:59:49 joerg Exp $

--- SConstruct.orig	2004-05-20 14:03:14.000000000 +0000
+++ SConstruct
@@ -1,6 +1,8 @@
 import os
 import glob
 
+SConsignFile()
+
 opts = Options(	"my_options.py")
 
 opts.Add("qt_directory", "Path to Qt directory", "not specified")
@@ -18,10 +20,7 @@ opts.Add("add_lib_dirs", "A comma-separa
 opts.Add(BoolOption("maintainer_mode", "Whether you want to use some special ingredients", 0))
 
 env = Environment(
-    ENV = {
-      'PATH' : os.environ[ 'PATH' ],
-      'HOME' : os.environ[ 'HOME' ] # required for distcc
-    }, options = opts)
+    ENV = os.environ, options = opts)
 env.Replace(CPPPATH = [], LIBS = [], LIBPATH = [], CPPDEFINES = [],
     CXXFLAGS = "", CCFLAGS = "")
 Help(opts.GenerateHelpText(env))
@@ -112,7 +111,7 @@ def SplitLibs(lstring):
 def CheckForQtAt(context, qtdir):
   context.Message('Checking for Qt at %s... ' % qtdir)
   result = AttemptLinkWithVariables(context,
-      { "LIBS": "qt-mt", "LIBPATH": qtdir + '/lib', "CPPPATH": qtdir + '/include' },
+      { "LIBS": "qt-mt", "LIBPATH": qtdir + '/lib', "CPPPATH": qtdir + '/include', "LINKFLAGS": os.environ.get("PTHREAD_LDFLAGS","").split() + os.environ.get("PTHREAD_LIBS", "").split()},
       """
 #include <qapplication.h>
 int main(int argc, char **argv) { 
