$NetBSD: patch-aa,v 1.3 2009/10/02 10:15:10 hasso Exp $

--- setup.py.orig	2009-07-09 18:55:53 +0300
+++ setup.py	2009-09-30 09:58:19 +0300
@@ -48,7 +48,8 @@ class my_install(install):
 
                 root = self.root or ""
                 for dir, files in data_files:
-                        dir = os.path.abspath(os.path.join(root, prefix, dir))
+                        if dir != "@PRELUDE_HOME@":
+                                dir = os.path.abspath(os.path.join(root, prefix, dir))
 
                         self.mkpath(dir)
                         for f in files:
@@ -71,7 +72,7 @@ class my_install(install):
         def init_siteconfig(self, prefix):
                 config = open("PreludeCorrelator/siteconfig.py", "w")
                 print >> config, "conf_dir = '%s'" % os.path.abspath(prefix + "/etc/prelude-correlator")
-                print >> config, "lib_dir = '%s'" % os.path.abspath(prefix + "/var/lib/prelude-correlator")
+                print >> config, "lib_dir = '%s'" % os.path.abspath("@PRELUDE_HOME@")
                 config.close()
 
 
@@ -84,8 +85,7 @@ if is_egg:
         data_files = [ ("", ["prelude-correlator.conf"]) ]
 else:
         package_data = {}
-        data_files = [ ("etc/prelude-correlator", ["prelude-correlator.conf"]),
-                       ("var/lib/prelude-correlator", ["PreludeCorrelator/plugins/dshield.dat"]) ]
+        data_files = [ ("@PRELUDE_HOME@", ["PreludeCorrelator/plugins/dshield.dat"]) ]
 
 setup(
         name="prelude-correlator",
