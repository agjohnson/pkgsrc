$NetBSD: patch-ag,v 1.3 2009/04/07 07:35:44 minskim Exp $

--- lib/rubygems/uninstaller.rb.orig	2008-08-14 15:57:27.000000000 -0700
+++ lib/rubygems/uninstaller.rb
@@ -45,6 +45,11 @@ class Gem::Uninstaller
     @force_all = options[:all]
     @force_ignore = options[:ignore]
     @bin_dir = options[:bin_dir]
+    install_root = options[:install_root]
+    unless install_root.nil? or install_root == ""
+      @install_root = File.expand_path install_root
+      @gem_home = File.join(@install_root, @gem_home)
+    end
 
     spec_dir = File.join @gem_home, 'specifications'
     @source_index = Gem::SourceIndex.from_gems_in spec_dir
@@ -109,7 +114,11 @@ class Gem::Uninstaller
     return if gemspec.nil?
 
     if gemspec.executables.size > 0 then
-      bindir = @bin_dir ? @bin_dir : (Gem.bindir @gem_home)
+      bindir = @bin_dir ? @bin_dir : (Gem.bindir @gem_home, @install_root)
+
+      unless @install_root.nil? or @install_root == ""
+        bindir = File.join(@install_root, bindir)
+      end
 
       list = @source_index.find_name(gemspec.name).delete_if { |spec|
         spec.version == gemspec.version
